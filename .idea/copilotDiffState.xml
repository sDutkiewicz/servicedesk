<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/INSTRUKCJA.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/INSTRUKCJA.md" />
              <option name="originalContent" value="#  INSTRUKCJA - Jak naprawić i uruchomić ServiceDesk&#10;&#10;## ✅ Co zostało naprawione:&#10;&#10;### 1. **CORS Configuration**&#10;- Zaktualizowano `CorsConfig.java` aby akceptować połączenia z `file://` i `localhost`&#10;- Dodano `allowedOriginPatterns(&quot;*&quot;)` dla local development&#10;&#10;### 2. **Data.sql - Timestamps**&#10;- Zmieniono format timestampów z ISO-8601 na `PARSEDATETIME()`&#10;- H2 database w trybie PostgreSQL ma problemy z `OffsetDateTime` - naprawiono&#10;&#10;### 3. **Port Configuration**&#10;- Backend działa na porcie 8080&#10;- Frontend skonfigurowany na http://localhost:8080&#10;&#10;---&#10;&#10;##  KROKI DO URUCHOMIENIA:&#10;&#10;### **KROK 1: Zrestartuj Backend (aplikację Spring Boot)**&#10;&#10;Musisz **ZATRZYMAĆ** i **URUCHOMIĆ PONOWNIE** aplikację w IntelliJ IDEA:&#10;&#10;1. W IntelliJ znajdź panel &quot;Run&quot; (na dole)&#10;2. Kliknij czerwony przycisk STOP (kwadrat) aby zatrzymać aplikację&#10;3. Kliknij zielony przycisk RUN (trójkąt) aby uruchomić ponownie&#10;&#10;**LUB** użyj skrótu klawiszowego:&#10;- `Shift + F10` - uruchom ponownie&#10;&#10;**WAŻNE:** Poczekaj aż w logach zobaczysz:&#10;```&#10;Started Main in X.XX seconds&#10;```&#10;&#10;### **KROK 2: Testowanie API**&#10;&#10;#### **Opcja A: Prosty Test (Terminal)**&#10;&#10;Otwórz Command Prompt i wpisz:&#10;```cmd&#10;curl http://localhost:8080/api/hello&#10;curl http://localhost:8080/api/departments&#10;curl http://localhost:8080/api/categories&#10;curl http://localhost:8080/api/tickets&#10;```&#10;&#10;Powinieneś zobaczyć dane JSON!&#10;&#10;#### **Opcja B: Test w Przeglądarce**&#10;&#10;1. Uruchom prosty serwer HTTP dla frontendu:&#10;   - Kliknij dwukrotnie na: `web\start-server.bat`&#10;&#10;2. Otwórz przeglądarkę:&#10;   - **Strona testowa API:** http://localhost:3000/test-api.html&#10;   - **Główna aplikacja:** http://localhost:3000/index.html&#10;&#10;#### **Opcja C: H2 Console (sprawdzenie bazy danych)**&#10;&#10;1. Otwórz: http://localhost:8080/h2-console&#10;2. Wypełnij formularz:&#10;   - **JDBC URL:** `jdbc:h2:mem:servicedesk` (skopiuj z logów)&#10;   - **User Name:** `sa`&#10;   - **Password:** (puste)&#10;3. Kliknij &quot;Connect&quot;&#10;4. Sprawdź tabele: `DEPARTMENTS`, `CATEGORIES`, `TICKETS`, `USERS`, `TECHNICIANS`, `COMMENTS`&#10;&#10;---&#10;&#10;## ❌ ROZWIĄZYWANIE PROBLEMÓW:&#10;&#10;### Problem: &quot;Failed to fetch&quot; w przeglądarce&#10;**Rozwiązanie:**&#10;- NIE otwieraj plików HTML bezpośrednio (file://)&#10;- Użyj `start-server.bat` aby uruchomić lokalny serwer HTTP&#10;- Lub uruchom z IntelliJ (prawym na index.html → Open in Browser → Built-in Server)&#10;&#10;### Problem: Puste tablice `[]` w API&#10;**Rozwiązanie:**&#10;- Sprawdź logi Spring Boot czy nie ma błędów SQL&#10;- Sprawdź czy `data.sql` się załadował (logi pokażą INSERT statements)&#10;- Zrestartuj aplikację&#10;&#10;### Problem: Port 8080 zajęty&#10;**Rozwiązanie:**&#10;```cmd&#10;netstat -ano | findstr :8080&#10;taskkill /F /PID &lt;numer_procesu&gt;&#10;```&#10;&#10;### Problem: CORS errors&#10;**Rozwiązanie:**&#10;- Upewnij się że używasz http://localhost:3000 a NIE file://&#10;- Zrestartuj backend po zmianach w CorsConfig&#10;&#10;---&#10;&#10;##  Sprawdź czy dane się załadowały:&#10;&#10;Po uruchomieniu aplikacji, w logach Spring Boot powinieneś zobaczyć:&#10;&#10;```sql&#10;insert into departments (id, name) values (1,'HR'), (2,'Maintenance'), (3,'IT'), (4,'Cargo')&#10;insert into users (id, first_name, last_name, email, department_id) values ...&#10;insert into technicians ...&#10;insert into categories ...&#10;insert into tickets ...&#10;insert into comments ...&#10;```&#10;&#10;Jeśli widzisz błędy SQL - sprawdź plik `data.sql`&#10;&#10;---&#10;&#10;##  Szybki Test:&#10;&#10;Uruchom w Command Prompt:&#10;```cmd&#10;curl http://localhost:8080/api/departments&#10;```&#10;&#10;**Oczekiwany rezultat:**&#10;```json&#10;[&#10;  {&quot;id&quot;:1,&quot;name&quot;:&quot;HR&quot;},&#10;  {&quot;id&quot;:2,&quot;name&quot;:&quot;Maintenance&quot;},&#10;  {&quot;id&quot;:3,&quot;name&quot;:&quot;IT&quot;},&#10;  {&quot;id&quot;:4,&quot;name&quot;:&quot;Cargo&quot;}&#10;]&#10;```&#10;&#10;Jeśli widzisz `[]` - dane się nie załadowały!&#10;&#10;---&#10;&#10;##  Pliki które zostały zmienione:&#10;&#10;1. `api/src/main/java/com/servicedesk/config/CorsConfig.java` ✅&#10;2. `api/src/main/resources/data.sql` ✅&#10;3. `web/config.js` ✅ (port 8080)&#10;4. `web/test-api.html` ✅ (nowy - tester API)&#10;5. `web/start-server.bat` ✅ (nowy - uruchamia serwer HTTP)&#10;&#10;---&#10;&#10;##  Następne kroki:&#10;&#10;1. **Zrestartuj backend w IntelliJ**&#10;2. **Sprawdź logi** czy data.sql się załadował&#10;3. **Testuj API** używając curl lub test-api.html&#10;4. **Uruchom frontend** przez start-server.bat&#10;&#10;---&#10;&#10; **TIP:** Jeśli wszystko działa, zobaczysz dane w test-api.html i główna aplikacja index.html będzie działać poprawnie!&#10;&#10;" />
              <option name="updatedContent" value="# ✅ NAPRAWIONE!&#10;&#10;# ✅ NAPRAWIONE!&#10;&#10;## Co zostało poprawione:&#10;&#10;1. **application.yml** - Usunięto duplikat klucza `jpa` (był dwa razy, teraz scalony w jeden)&#10;2. **OffsetDateTime → LocalDateTime** - Zmieniono typ daty w encjach `Ticket` i `Comment` z `OffsetDateTime` na `LocalDateTime` dla kompatybilności z H2 database&#10;3. **data.sql** - Poprawiono format timestampów na `TIMESTAMP 'YYYY-MM-DD HH:MM:SS'`&#10;4. **CORS** - Zaktualizowano konfigurację aby działała z lokalnym frontendem&#10;&#10;## Jak uruchomić:&#10;&#10;1. **Uruchom aplikację** w IntelliJ (kliknij prawym na `Main.java` → Run 'Main')&#10;2. **Otwórz przeglądarkę** i wejdź na `http://localhost:8080/api/departments`&#10;3. **Powinieneś zobaczyć dane!**&#10;&#10;```json&#10;[&#10;  {&quot;id&quot;:1,&quot;name&quot;:&quot;HR&quot;},&#10;  {&quot;id&quot;:2,&quot;name&quot;:&quot;Maintenance&quot;},&#10;  {&quot;id&quot;:3,&quot;name&quot;:&quot;IT&quot;},&#10;  {&quot;id&quot;:4,&quot;name&quot;:&quot;Cargo&quot;}&#10;]&#10;```&#10;&#10;## Frontend:&#10;&#10;Aby otworzyć frontend, kliknij dwukrotnie na: `web\start-server.bat`&#10;Potem otwórz: `http://localhost:3000/index.html`&#10;&#10;**Lub** otwórz `web\index.html` bezpośrednio w IntelliJ (prawym → Open in Browser → Built-in Server)&#10;&#10;---&#10;&#10;**To wszystko! Po prostu uruchom Main.java i wszystko będzie działać! **&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/api/src/main/resources/application.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/api/src/main/resources/application.yml" />
              <option name="originalContent" value="spring:&#10;  application:&#10;    name: servicedesk&#10;&#10;  datasource:&#10;    url: jdbc:h2:mem:servicedesk;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&#10;    driver-class-name: org.h2.Driver&#10;    username: sa&#10;    password:&#10;&#10;  jpa:&#10;    hibernate:&#10;      ddl-auto: create-drop&#10;    show-sql: true&#10;    properties:&#10;      hibernate.format_sql: true&#10;&#10;  sql:&#10;    init:&#10;      mode: always&#10;&#10;  jpa:&#10;    defer-datasource-initialization: true&#10;&#10;  h2:&#10;    console:&#10;      enabled: true&#10;      path: /h2-console&#10;&#10;server:&#10;  port: 8081&#10;" />
              <option name="updatedContent" value="spring:&#10;  application:&#10;    name: servicedesk&#10;&#10;  datasource:&#10;    url: jdbc:h2:mem:servicedesk;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&#10;    driver-class-name: org.h2.Driver&#10;    username: sa&#10;    password:&#10;&#10;  jpa:&#10;    hibernate:&#10;      ddl-auto: create-drop&#10;    show-sql: true&#10;    properties:&#10;      hibernate.format_sql: true&#10;    defer-datasource-initialization: true&#10;&#10;  sql:&#10;    init:&#10;      mode: always&#10;&#10;  h2:&#10;    console:&#10;      enabled: true&#10;      path: /h2-console&#10;&#10;server:&#10;  port: 8080&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>